<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë™ë¬¼ ì¹œêµ¬ í´ë¦­ ê²Œì„</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
      background: #fefae0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      text-align: center;
    }
    #character {
      font-size: 5rem;
      margin: 1rem;
    }
    #startButton, #clickButton {
      padding: 1rem 2rem;
      font-size: 1.2rem;
      font-weight: bold;
      border: none;
      border-radius: 9999px;
      cursor: pointer;
      margin-top: 1rem;
      background-color: #38bdf8;
      color: white;
    }
    #clickButton {
      display: none;
    }
    #scoreBoard, #highScore, #timeLeft {
      font-size: 1.2rem;
      margin-top: 0.2rem;
    }
    #message {
      margin-top: 1rem;
      font-size: 1.2rem;
    }
  </style>
</head>
<body>
  <h1>ğŸ¾ ë™ë¬¼ ì¹œêµ¬ í´ë¦­ ê²Œì„</h1>
  <div id="character">ğŸ¶</div>
  <div id="characterName">ê°•ì•„ì§€</div>
  <div id="scoreBoard">ì ìˆ˜: <span id="score">0</span></div>
  <div id="highScore">ğŸ‘‘ ìµœê³  ì ìˆ˜: <span id="best">0</span></div>
  <div id="timeLeft">ë‚¨ì€ ì‹œê°„: <span id="time">15</span>ì´ˆ</div>
  <div id="message">ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì‹œì‘í•˜ì„¸ìš”!</div>
  <button id="startButton">ê²Œì„ ì‹œì‘</button>
  <button id="clickButton">í„°ì¹˜ / í´ë¦­!</button>

  <audio id="bgm" loop>
    <source src="title.mp3" type="audio/mpeg">
  </audio>
  <audio id="clickSound">
    <source src="https://cdn.pixabay.com/audio/2023/03/31/audio_a7dc53b77c.mp3" type="audio/mpeg">
  </audio>

  <script>
    const startButton = document.getElementById("startButton");
    const clickButton = document.getElementById("clickButton");
    const character = document.getElementById("character");
    const characterName = document.getElementById("characterName");
    const scoreSpan = document.getElementById("score");
    const message = document.getElementById("message");
    const bgm = document.getElementById("bgm");
    const clickSound = document.getElementById("clickSound");
    const bestSpan = document.getElementById("best");
    const timeSpan = document.getElementById("time");

    const animals = [
      { emoji: "ğŸ¶", name: "ê°•ì•„ì§€" }, { emoji: "ğŸ±", name: "ê³ ì–‘ì´" },
      { emoji: "ğŸ°", name: "í† ë¼" }, { emoji: "ğŸ¦Š", name: "ì—¬ìš°" },
      { emoji: "ğŸ»", name: "ê³°" }, { emoji: "ğŸ¼", name: "íŒë‹¤" },
      { emoji: "ğŸ¨", name: "ì½”ì•Œë¼" }, { emoji: "ğŸ¯", name: "í˜¸ë‘ì´" },
      { emoji: "ğŸ¦", name: "ì‚¬ì" }, { emoji: "ğŸ·", name: "ë¼ì§€" }
    ];

    let score = 0;
    let bestScore = localStorage.getItem('animalGameHighScore') || 0;
    let timer;
    let countdown;

    bestSpan.textContent = bestScore;

    function getRandomAnimal() {
      return animals[Math.floor(Math.random() * animals.length)];
    }

    function changeAnimal() {
      const animal = getRandomAnimal();
      character.textContent = animal.emoji;
      characterName.textContent = animal.name;
      document.body.style.backgroundColor = `hsl(${Math.floor(Math.random()*360)}, 80%, 90%)`;
    }

    function endGame() {
      clearTimeout(timer);
      clearInterval(countdown);
      clickButton.disabled = true;
      clickButton.style.display = "none";
      startButton.style.display = "inline-block";
      message.textContent = `ğŸ›‘ ê²Œì„ ì˜¤ë²„! ìµœì¢… ì ìˆ˜: ${score}ì `;
      if (score > bestScore) {
        bestScore = score;
        localStorage.setItem('animalGameHighScore', bestScore);
        bestSpan.textContent = bestScore;
        alert("ğŸ‰ ìµœê³  ê¸°ë¡ ê°±ì‹ !");
      } else {
        bestSpan.textContent = bestScore;
      }
      bgm.pause();
    }

    startButton.addEventListener("click", () => {
      score = 0;
      scoreSpan.textContent = score;
      bestSpan.textContent = bestScore;
      changeAnimal();
      clickButton.disabled = false;
      clickButton.style.display = "inline-block";
      startButton.style.display = "none";
      message.textContent = "í„°ì¹˜ / í´ë¦­í•´ì„œ ë™ë¬¼ ì¹œêµ¬ë¥¼ ë°”ê¿”ë³´ì„¸ìš”!";
      bgm.volume = 0.5;
      bgm.play().catch(() => alert("ìŒì•… ì¬ìƒì„ í—ˆìš©í•˜ë ¤ë©´ í™”ë©´ì„ í•œ ë²ˆ ë” ëˆŒëŸ¬ì£¼ì„¸ìš”."));

      let timeLeft = 15;
      timeSpan.textContent = timeLeft;
      countdown = setInterval(() => {
        timeLeft--;
        timeSpan.textContent = timeLeft;
        if (timeLeft <= 0) clearInterval(countdown);
      }, 1000);

      timer = setTimeout(endGame, 15000);
    });

    clickButton.addEventListener("click", () => {
      score++;
      scoreSpan.textContent = score;
      clickSound.volume = 1.0;
      clickSound.currentTime = 0;
      clickSound.play().catch(e => {
        console.warn("âŒ íš¨ê³¼ìŒ ì¬ìƒ ì‹¤íŒ¨:", e);
        alert("ğŸ”‡ íš¨ê³¼ìŒì„ ì¬ìƒí•˜ë ¤ë©´ ê¸°ê¸° ìŒì†Œê±°ë¥¼ í•´ì œí•˜ê³ , í•œ ë²ˆ ë” í´ë¦­í•´ë³´ì„¸ìš”!");
      });
      changeAnimal();
    });
  </script>
</body>
</html>
